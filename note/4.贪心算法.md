# 贪心算法

## 经典例子1

- 部分背包问题（Fractional Knapsack Problem）
    - 输入：
        -  $n$ 个物品组成的合集 $O$ ,每个物品有两个属性 $v_i$ 和 $p_i$ ,分别表示体积和价格
        - 背包的容量是 $C$
    - 输出：
        - 求解一个解决方案 $S=\{x_i|1\leq i\leq n,0\leq x_i\leq 1\}$
        - $$\max{\sum_{x_i\in S}}x_i\cdot p_i \quad \text{优化目标}$$
        $$s.t.\sum_{x_i\in S}x_i\cdot v_i\leq C \quad \text{约束条件}$$
- 策略
    - 选择性价比优先
        - 性价比=价格/体积
        - 优先选择高性价比的饮料全部装入，尽可能装满杯子
- 正确性证明
    - 贪心策略：最高性价比优先
    - 证明：贪心不劣于最优解
- 伪代码
<div align="center">
<img src="./fractionalKnapsack.svg" width="600" alt="贪心策略" />
</div> 

- 一般步骤
    - 提出贪心策略
        - 观察问题特征，构造贪心选择
    - 证明策略正确
        - 假设最优方案，通过替换证明

## 经典例子2
- 霍夫曼编码
    - 问题背景：在计算机中常使用二进制串对不同字符进行编码
    - 编码树：顶点到左顶点的边标记为0，到右节点的边标记为1，通过编码方案构造编码树
    - 每条根到叶子的路径对应每个字符的二进制串

<div align="center">
<img src="./编码树.svg" width="600" alt="编码树" />
</div> 

- 最优前缀码
    - 输入：字符串 $n$ 以及各个字符的频数 $F=<f_1,f_2,...f_n>$

    - 输出：解析结果唯一的二进制编码方案 $C=<c_1,...c_n>$
    $$\min{\sum_{i=1}^{n}|c_i|f_i}\quad \text{优化目标}$$
    $$|c_i|为字符i 的编码二进制串的长度$$
- 贪心策略1
    - 优先处理高频字符，依次编码高频字符
        - 将字符频数从大到小排序， $F=<f_1,f_2,...,f_n>(f_1\geq f_2\geq...\geq f_n)$
        - 依次编码高频字符
- 贪心策略2
    - 优先处理低频字符
        - 将字符频数从小到大进行排序， $F=<f_1,f_2,....f_n>(f_1\leq f_2\leq...\leq f_n)$
        - 选两个最小的频数 $f_1,f_2$ 进行合并 $f^{'}=f_1+f_2$
        - 在 $F^{'}=<f^{'},f_3,..f_n>$ 中重复选择进行合并
<div align="center">
<img src="./Huffman.svg" width="600" alt="Huffman" />
</div> 

## 经典例子3

- 活动选择问题
    - 问题背景
        - 会场出租：选择出租的活动时间不冲突
        - 输入：
            - $n$个活动组成的集合 $S=\{a_1,a_2,...a_n\}$
            - 每个活动 $a_i$的开始时间 $s_i$ 和结束时间 $f_i$ 
        - 输出：
            - 找出活动集合 $S$ 的子集 $S^{'}$ ,
            $$\max{|S^{'}|}$$
            $$s.t.\forall a_i,a_j\in S^{'},s_i\geq f_j 或者 s_j \geq f_i$$
- 贪心策略
    - 最短的活动优先
    - 最早开始的活动优先
    - 最早结束的活动优先：选择最早结束的活动，可以给后面的活动留更大的选择空间


<div align="center">
<img src="./会场选择.svg" width="600" alt="会场选择" />
</div> 

- 带权的活动选择问题
    - 输入：
        - $n$个活动组成的集合 $S=\{a_1,a_2,...a_n\}$
        - 每个活动 $a_i$的开始时间 $s_i$ 和结束时间 $f_i$ 和权重 $w_i$
    - 输出：
        - 找出活动集合 $S$ 的子集 $S^{'}$ ,
        $$\max{\sum_{a_i\in S^{'}}w_i}\quad \text{优化目标：最大化权重之和}$$
        $$s.t.\forall a_i,a_j\in S^{'},s_i\geq f_j 或者 s_j \geq f_i\quad \text{约束条件}$$

- 算法步骤
    - 存在折叠子问题，使用动态规划进行求解
        - 预处理
            - 排序：按照活动结束的时间进行升序排序
            - 求 $p[i]$:在 $a_i$ 开始前最后结束的活动（排序之后使用二分查找）
        - 给出问题表示
            - $D[i]$:集合 $\{a_1,a_2,a_3,...a_i\}$ 中不冲突活动最大权重和
        - 明确原始问题
            - $D[n]$:集合 $\{a_1,a_2,a_3,...a_n\}$ 中不冲突活动最大权重和
    - 递推关系建立
        - 分析子结构
            - 考察活动 $a_i$:选择/不选择
            - 递推公式：
                - $D[i]=\max\{D[p[i]]+w_i,D[i-1]\}$
    - 自底向上计算
        - 初始化
            - $D[0]=0$,空活动集最大的权重和是0
        - 递推公式
            - $D[i]=\max{D[p[i]]+w_i,D[i-1]}$

<div align="center">
<img src="./带权的会场选择.svg" width="600" alt="带权的会场选择" />
</div> 
